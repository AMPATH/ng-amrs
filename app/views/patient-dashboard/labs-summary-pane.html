<div ng-disabled="isBusy">
  <div>
    <!--table class='table table-hover table-striped' id="data_table"-->
    <table class='table table-hover table-striped'>
      <thead>
        <tr>
          <th>Date</th>
          <th>CD4</th>
          <th>CD4 Percent</th>
          <th>Viral Load</th>
          <th>Hemoglobin</th>
          <th>AST</th>
          <th>Creatinine</th>
          <th>Chest Xray</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="encounter in encounters" >
          <td>{{encounter.encounterDatetime().substring(0,10)}}</td>
          <td>{{encounter.cd4Count()}}</td>
          <td>{{encounter.cd4Percent()}}</td>
          <td>{{encounter.hivViralLoad()}}</td>
          <td>{{encounter.hemoglobin()}}</td>
          <td>{{encounter.ast()}}</td>
          <td>{{encounter.creatinine()}}</td>
          <td>{{encounter.chestXray()}}</td>
        </tr>
      </tbody>
    </table>
    <div ng-show='experiencedLoadingError'>
      <p class="bg-danger" style="padding:4px;">
        <b>
          <span style="color:red;" class="glyphicon glyphicon-exclamation-sign"></span>An error occured while loading. Please try again.</b>
        <p>
    </div>
    <div ng-show='!isBusy && !allDataLoaded'>
      <button class="btn btn-info" ng-click="loadMoreLabs()">
        <span class="glyphicon glyphicon-refresh"></span>Load More</button>
    </div>
    <div ng-show='isBusy && !allDataLoaded'>
      <img ng-show="isBusy" src="images/ajax-loader.gif" autofocus />
      <b>Loading data...</b>
    </div>
    <div ng-show='allDataLoaded'>
      <p class="bg-info" style="padding:4px;">
        <b>
          <span style="color:green;" class="glyphicon glyphicon-ok" />All patient tests loaded {{'[ ' + encounters.length + ' ]'}}</b>
        <p>
    </div>
  </div>
</div>
