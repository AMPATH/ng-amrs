{
    "name": "AMPATH Adult/Ped Transit/Between Visit Med Refill Encounter Form",
    "version": "0.01",
    "encounterType": "uuid",
    "processor": "EncounterFormProcessor",
    "form": "uuid",
    "referencedForms": [
        {
            "formName": "component_art",
            "alias": "art"
        },
        {
            "formName": "component_pcp-prophy",
            "alias": "pcp"
        },
        {
            "formName": "component_tb-prophy",
            "alias": "tbp"
        },
        {
            "formName": "component_crypto",
            "alias": "cry"
        },
        {
            "formName": "component_tb-treatment",
            "alias": "tbt"
        },
        {
            "formName": "component_other-medication",
            "alias": "omed"
        },
        {
            "formName": "component_lab-orders",
            "alias": "lo"
        }
    ],
    "pages": [
        {
            "label": "Encounter Details",
            "sections": [
                {
                    "label": "Encounter Details",
                    "questions": [
                        {
                            "label": "Visit Date",
                            "type": "encounterDatetime",
                            "id": "encDate",
                            "required": "true",
                            "default": "",
                            "questionOptions": {
                                "rendering": "date"
                            },
                            "validators": [
                                {
                                    "type": "date"
                                }
                            ]
                        },
                        {
                            "type": "encounterProvider",
                            "label": "Provider",
                            "required": "true",
                            "default": "",
                            "questionOptions": {
                                "rendering": "ui-select-extended"
                            }
                        },
                        {
                            "type": "encounterLocation",
                            "label": "Facility name (site/satellite clinic required):",
                            "required": "true",
                            "questionOptions": {
                                "rendering": "ui-select-extended"
                            }
                        }
                    ]
                }
            ]
        },
        {
            "label": "Patient Details",
            "sections": [
                {
                    "label": "Patient Details",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "Patient type:",
                            "required": "true",
                            "id": "pattype",
                            "questionOptions": {
                                "rendering": "select",
                                "concept": "a89eea66-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a89ee8ea-1350-11df-a1f1-0026b9348838",
                                        "label": "Adult"
                                    },
                                    {
                                        "concept": "a89ee9a8-1350-11df-a1f1-0026b9348838",
                                        "label": "Ped"
                                    }
                                ]
                            },
                            "type": "obs",
                            "validators": []
                        },
                        {
                            "label": "Patient current care program  :",
                            "questionOptions": {
                                "rendering": "select",
                                "concept": "a8afbb16-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a89c2f42-1350-11df-a1f1-0026b9348838",
                                        "label": "Ampath Plus"
                                    },
                                    {
                                        "concept": "a89c301e-1350-11df-a1f1-0026b9348838",
                                        "label": "Non Ampath Plus"
                                    }
                                ]
                            },
                            "type": "obs",
                            "validators": []
                        },
                        {
                            "label": "Mother Deceased:",
                            "questionOptions": {
                                "rendering": "select",
                                "concept": "a8a0b670-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                                        "label": "Yes"
                                    },
                                    {
                                        "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                                        "label": "No"
                                    }
                                ]
                            },
                            "type": "obs",
                            "validators": [],
                            "hide": {
                                "hideWhenExpression": "pattype !== 'a89ee9a8-1350-11df-a1f1-0026b9348838'"
                            }
                        },
                        {
                            "label": "Father Deceased:",
                            "questionOptions": {
                                "rendering": "select",
                                "concept": "a8a0b670-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                                        "label": "Yes"
                                    },
                                    {
                                        "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                                        "label": "No"
                                    }
                                ]
                            },
                            "type": "obs",
                            "validators": [],
                            "hide": {
                                "hideWhenExpression": "pattype !== 'a89ee9a8-1350-11df-a1f1-0026b9348838'"
                            }
                        },
                        {
                            "label": "Was this visit scheduled?",
                            "questionOptions": {
                                "rendering": "select",
                                "concept": "a89ff9a6-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a89b6440-1350-11df-a1f1-0026b9348838",
                                        "label": "Scheduled visit"
                                    },
                                    {
                                        "concept": "a89ff816-1350-11df-a1f1-0026b9348838",
                                        "label": "Unscheduled Visit Early"
                                    },
                                    {
                                        "concept": "a89ff8de-1350-11df-a1f1-0026b9348838",
                                        "label": "Unscheduled Visit Late"
                                    }
                                ]
                            },
                            "type": "obs",
                            "validators": []
                        },
                        {
                            "type": "obsGroup",
                            "label": "Individual who picked/picking drugs detailed",
                            "questionOptions": {
                                "concept": "a8a36d7a-1350-11df-a1f1-0026b9348838",
                                "rendering": "group"
                            },
                            "questions": [
                                {
                                    "label": "Individual who picked/picking drugs",
                                    "questionOptions": {
                                        "concept": "a89cd410-1350-11df-a1f1-0026b9348838",
                                        "answers": [
                                            {
                                                "concept": "a898c0dc-1350-11df-a1f1-0026b9348838",
                                                "label": "Mother"
                                            },
                                            {
                                                "concept": "a898c1a4-1350-11df-a1f1-0026b9348838",
                                                "label": "Father"
                                            },
                                            {
                                                "concept": "a89cd0fa-1350-11df-a1f1-0026b9348838",
                                                "label": "Husband"
                                            },
                                            {
                                                "concept": "a89cd1c2-1350-11df-a1f1-0026b9348838",
                                                "label": "Wife"
                                            },
                                            {
                                                "concept": "a898c32a-1350-11df-a1f1-0026b9348838",
                                                "label": " Grandparent"
                                            },
                                            {
                                                "concept": "a89cd280-1350-11df-a1f1-0026b9348838",
                                                "label": "Care taker/Guardian"
                                            },
                                            {
                                                "concept": "a8aaf07c-1350-11df-a1f1-0026b9348838",
                                                "label": "Friend/Colleague"
                                            },
                                            {
                                                "concept": "a89cd352-1350-11df-a1f1-0026b9348838",
                                                "label": "Neighbor"
                                            },
                                            {
                                                "concept": "a898c262-1350-11df-a1f1-0026b9348838",
                                                "label": "Sibling"
                                            },
                                            {
                                                "concept": "a8a17470-1350-11df-a1f1-0026b9348838",
                                                "label": "Paternal Aunt"
                                            },
                                            {
                                                "concept": "a8a17394-1350-11df-a1f1-0026b9348838",
                                                "label": "Maternal Aunt"
                                            },
                                            {
                                                "concept": "a8a175f6-1350-11df-a1f1-0026b9348838",
                                                "label": "Paternal Uncle"
                                            },
                                            {
                                                "concept": "a8a1752e-1350-11df-a1f1-0026b9348838",
                                                "label": "Maternal Uncle"
                                            },
                                            {
                                                "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                                                "label": "Other"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "type": "obs"
                                },
                                {
                                    "label": "Other (Specify)",
                                    "questionOptions": {
                                        "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                                        "rendering": "text"
                                    },
                                    "type": "obs"
                                }
                            ]
                        },
                        {
                            "type": "obsGroup",
                            "label": "Reason for not picking own Meds detailed",
                            "questionOptions": {
                                "concept": "a8a36cbc-1350-11df-a1f1-0026b9348838",
                                "rendering": "group"
                            },
                            "questions": [
                                {
                                    "label": "Reason for not picking own Meds",
                                    "questionOptions": {
                                        "concept": "a89de3a0-1350-11df-a1f1-0026b9348838",
                                        "answers": [
                                            {
                                                "concept": "a89de152-1350-11df-a1f1-0026b9348838",
                                                "label": "Travelling"
                                            },
                                            {
                                                "concept": "a89de21a-1350-11df-a1f1-0026b9348838",
                                                "label": "Work/School"
                                            },
                                            {
                                                "concept": "a89de2d8-1350-11df-a1f1-0026b9348838",
                                                "label": "Too sick to come"
                                            },
                                            {
                                                "concept": "a897fdaa-1350-11df-a1f1-0026b9348838",
                                                "label": "Lacked Transport/Fare"
                                            },
                                            {
                                                "concept": "a8a8b0b4-1350-11df-a1f1-0026b9348838",
                                                "label": " Inpatient care or hospitalization"
                                            },
                                            {
                                                "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                                                "label": " Other"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "type": "obs"
                                },
                                {
                                    "label": "Other Reason(Specify)",
                                    "questionOptions": {
                                        "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                                        "rendering": "text"
                                    },
                                    "type": "obs"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "label": "Current Medication",
            "sections": [
                {
                    "label": "ART History",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "Patient currently on ART:",
                            "required": "true",
                            "id": "onArt",
                            "historicalExpression": "arrayContainsAny(['a89b7c50-1350-11df-a1f1-0026b9348838','a89b7ae8-1350-11df-a1f1-0026b9348838','a8a00220-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838'], HD.getObject('prevEnc').getValue('a89b75d4-1350-11df-a1f1-0026b9348838')) ? 'a899b35c-1350-11df-a1f1-0026b9348838' : HD.getObject('prevEnc').getValue('a89ae254-1350-11df-a1f1-0026b9348838')",
                            "questionOptions": {
                                "concept": "a89ae254-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                                        "label": "Yes"
                                    },
                                    {
                                        "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                                        "label": "No"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs",
                            "validators": []
                        },
                        {
                            "label": "Line of ART patient is taking:",
                            "id": "current_arv_line",
                            "historicalExpression": "!_.isEmpty(HD.getObject('prevEnc').getValue('a89b6a62-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('04616f5d-b961-4f41-bbd7-bcc0dd235577')",
                            "questionOptions": {
                                "concept": "04616f5d-b961-4f41-bbd7-bcc0dd235577",
                                "answers": [
                                    {
                                        "concept": "034047bd-3fa1-4b2a-b0f0-2787e9b9f7b3",
                                        "label": "First line regimen"
                                    },
                                    {
                                        "concept": "8f8a715d-e49a-4b2c-aa3a-83fa9d7a4254",
                                        "label": "Second line regimen"
                                    },
                                    {
                                        "concept": "a90ebdd2-351f-485a-b850-4938fcca2729",
                                        "label": "Third line regimen"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs",
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "isEmpty(myValue) && !isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838'",
                                    "message": "Patient previously marked as on ART. Please provide the treatment category."
                                }
                            ],
                            "hide": {
                                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                            }
                        },
                        {
                            "label": "Patient's current ART regimen, peds:",
                            "id": "current_art_regimen_ped",
                            "questionOptions": {
                                "concept": "a899cf5e-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "b58a28d2-36de-11e0-93be-0026b9348838",
                                        "label": "ABC 60mg/3TC 30mg"
                                    },
                                    {
                                        "concept": "25c753d8-870f-11e0-85d3-000d6014b64c",
                                        "label": "ZDV 60mg/3TC 30mg"
                                    },
                                    {
                                        "concept": "20185c04-9334-11df-8193-000d6014b64c",
                                        "label": "ZDV 60mg/3TC 30mg/NVP 50mg"
                                    },
                                    {
                                        "concept": "8ddf2f66-9333-11df-8193-000d6014b64c",
                                        "label": "ZDV 300mg/3TC 150mg/NVP 200mg >25kgs"
                                    },
                                    {
                                        "concept": "fd4cd670-3115-11e0-8090-0026b9348838",
                                        "label": "3TC 150mg/ZDV 300mg >25kgs"
                                    },
                                    {
                                        "concept": "b9da84e8-3127-11e0-8090-0026b9348838",
                                        "label": "3TC 300mg/TDF 300mg >25kgs"
                                    },
                                    {
                                        "concept": "e0037172-87ce-11e0-85d3-000d6014b64c",
                                        "label": "TDF 300mg/3TC 300mg/EFV 600mg >35kgs"
                                    },
                                    {
                                        "concept": "f8b6299e-6bbf-446a-b3f1-a88f5d6b9da2",
                                        "label": "Lopinavir 80mg/Ritonavir 20mg"
                                    },
                                    {
                                        "concept": "fa8266f6-36df-11e0-93be-0026b9348838",
                                        "label": "Lopinavir 200mg/Ritonavir 50mg >25kgs"
                                    },
                                    {
                                        "concept": "3cbfb0b9-721e-4d42-92a3-7d37269aab24",
                                        "label": " Atazanavir 300mg/ritonavir 100mg"
                                    },
                                    {
                                        "concept": "2fc1f68c-9939-44d4-b5f4-e064ed4073ca",
                                        "label": "Nevirapine 100mg"
                                    },
                                    {
                                        "concept": "0485075a-3111-11e0-8090-0026b9348838",
                                        "label": "Nevirapine 200mg"
                                    },
                                    {
                                        "concept": "db3c194b-3e1b-4001-9a1c-a5df1728fc28",
                                        "label": "Efavirenz 200mg"
                                    },
                                    {
                                        "concept": "ff9096b6-d86c-403a-9bda-eab02252dbf3",
                                        "label": "Efavirenz 250mg"
                                    },
                                    {
                                        "concept": "55e0461f-b28f-42de-a3c6-328d7f17c44b",
                                        "label": "Efavirenz 350mg"
                                    },
                                    {
                                        "concept": "81a41a82-fd72-4da4-8d47-edd5672549ce",
                                        "label": "Efavirenz 400mg"
                                    },
                                    {
                                        "concept": "4677ad3e-3120-11e0-8090-0026b9348838",
                                        "label": "Efavirenz 600mg"
                                    },
                                    {
                                        "concept": "d6262526-3113-11e0-8090-0026b9348838",
                                        "label": "Lamivudine 150mg"
                                    },
                                    {
                                        "concept": "52441ef8-3126-11e0-8090-0026b9348838",
                                        "label": " Abacavir 300mg"
                                    },
                                    {
                                        "concept": "21d417bc-3114-11e0-8090-0026b9348838",
                                        "label": " Zidovudine 300mg "
                                    },
                                    {
                                        "concept": "1baf254e-1429-4fd9-8db1-edf6523cea13",
                                        "label": " Ritonavir 100mg"
                                    },
                                    {
                                        "concept": "42ef7c4d-d6fb-49c0-a46e-019c42dea203",
                                        "label": " Ritonavir 80mg"
                                    },
                                    {
                                        "concept": "da698164-870d-11e0-85d3-000d6014b64c",
                                        "label": " Raltegravir 400mg"
                                    },
                                    {
                                        "concept": "a8afbf9e-1350-11df-a1f1-0026b9348838",
                                        "label": "Atazanavir "
                                    }
                                ],
                                "rendering": "multiCheckbox"
                            },
                            "type": "obs",
                            "validators": [],
                            "hide": {
                                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'|| pattype !== 'a89ee9a8-1350-11df-a1f1-0026b9348838'"
                            }
                        },
                        {
                            "label": "Patient's current ART regimen, adults:",
                            "id": "current_art_regimen_adult",
                            "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a89b6a62-1350-11df-a1f1-0026b9348838')) ? HD.getObject('prevEnc').getValue('a8a08344-1350-11df-a1f1-0026b9348838.a899cf5e-1350-11df-a1f1-0026b9348838') : HD.getObject('prevEnc').getValue('a89b6a62-1350-11df-a1f1-0026b9348838')",
                            "questionOptions": {
                                "concept": "a899cf5e-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                     {
                                        "concept": "6a73f32d-1870-4527-af6e-74443251ded2",
                                        "label": "NVP200/ZDV300/3TC150"
                                    },
                                    {
                                        "concept": "1c4a75d0-cc91-4752-b0a5-4b833326ff7a",
                                        "label": "TDF300mg/3TC300mg/EFV600mg"
                                    },
                                    {
                                        "concept": "a89cc876-1350-11df-a1f1-0026b9348838",
                                        "label": "3TC300mg/TDF300mg"
                                    },
                                    {
                                        "concept": "3d587177-984e-4eeb-93f2-3223b6c1dd7c",
                                        "label": "3TC150mg/D4T30mg"
                                    },
                                    {
                                        "concept": "a896758e-1350-11df-a1f1-0026b9348838",
                                        "label": "3TC150mg/ZDV300mg"
                                    },
                                    {
                                        "concept": "a897e608-1350-11df-a1f1-0026b9348838",
                                        "label": "NVP200/D4T30/3TC150"
                                    },
                                    {
                                        "concept": "a8afcf84-1350-11df-a1f1-0026b9348838",
                                        "label": "Emtri200mg/TDF300(Truvada)"
                                    },
                                    {
                                        "concept": "a897e7c0-1350-11df-a1f1-0026b9348838",
                                        "label": "Aluvia(Kaletra)200mg/LPV50mg"
                                    },
                                    {
                                        "concept": "a8afc066-1350-11df-a1f1-0026b9348838",
                                        "label": "Atazanavir300/Ritonavir100"
                                    },
                                    {
                                        "concept": "dabf36cb-dd9a-4542-a8ef-874c1ee5be4a",
                                        "label": "FTC200mg/RPV25mg/TDF245mg(Eviplera)"
                                    },
                                    {
                                        "concept": "a897f8a0-1350-11df-a1f1-0026b9348838",
                                        "label": "Abacavir300mg"
                                    },
                                    {
                                        "concept": "a89677e6-1350-11df-a1f1-0026b9348838",
                                        "label": "Efavirenz600mg"
                                    },
                                    {
                                        "concept": "a89673f4-1350-11df-a1f1-0026b9348838",
                                        "label": "Lamivudine150mg"
                                    },
                                    {
                                        "concept": "a8967656-1350-11df-a1f1-0026b9348838",
                                        "label": "Nevirapine200mg"
                                    },
                                    {
                                        "concept": "a8afbd64-1350-11df-a1f1-0026b9348838",
                                        "label": "Raltegravir 400mg"
                                    },
                                    {
                                        "concept": "a897ea4a-1350-11df-a1f1-0026b9348838",
                                        "label": "Zidovudine300mg"
                                    },
                                    {
                                        "concept": "68a0a5dd-1e91-43a2-8dce-c6e84a14de04",
                                        "label": "Darunavir 600mg"
                                    },
                                    {
                                        "concept": "38fbba9c-4b26-412d-9659-8dd649514d66",
                                        "label": "Etravirine 100mg"
                                    },
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a8a87a86-1350-11df-a1f1-0026b9348838",
                                        "label": "Other"
                                    }
                                ],
                                "rendering": "multiCheckbox"
                            },
                            "type": "obs",
                            "validators": [],
                            "hide": {
                                "hideWhenExpression": "onArt !== 'a899b35c-1350-11df-a1f1-0026b9348838'||pattype !== 'a89ee8ea-1350-11df-a1f1-0026b9348838'"
                            }
                        }
                    ]
                },
                {
                    "label": "PCP Prophylaxis Current",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "PCP prophylaxis:",
                            "id": "pcpProphylaxisCurrent",
                            "historicalExpression": "HD.getObject('prevEnc').getValue('a899e282-1350-11df-a1f1-0026b9348838')",
                            "questionOptions": {
                                "concept": "a899e282-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a8989396-1350-11df-a1f1-0026b9348838",
                                        "label": "Septrin"
                                    },
                                    {
                                        "concept": "a890c9e0-1350-11df-a1f1-0026b9348838",
                                        "label": "Dapsone 100mg"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "required": "true",
                            "type": "obs",
                            "validators": []
                        }
                    ]
                },
                {
                    "label": "TB Prophylaxis Current",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "Patient on TB prophylaxis",
                            "type": "obs",
                            "required": "true",
                            "id": "onTbProphylaxis",
                            "historicalExpression": "HD.getObject('prevEnc').getValue('a899e35e-1350-11df-a1f1-0026b9348838')",
                            "questionOptions": {
                                "concept": "a899e35e-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a896cc00-1350-11df-a1f1-0026b9348838",
                                        "label": "Isoniazid"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "validators": []
                        }
                    ]
                },
                {
                    "label": "Tuberculosis History",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "id": "onTbTreatment",
                            "required": "true",
                            "label": "Is patient on TB treatment?",
                            "historicalExpression": "HD.getObject('prevEnc').getValue('a8afcc82-1350-11df-a1f1-0026b9348838')",
                            "questionOptions": {
                                "concept": "a8afcc82-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899b35c-1350-11df-a1f1-0026b9348838",
                                        "label": "Yes"
                                    },
                                    {
                                        "concept": "a899b42e-1350-11df-a1f1-0026b9348838",
                                        "label": "No"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs"
                        },
                        {
                            "type": "obsGroup",
                            "label": "Start date of TB treatment",
                            "questionOptions": {
                                "concept": "a8afdb8c-1350-11df-a1f1-0026b9348838",
                                "rendering": "group"
                            },
                            "questions": [
                                {
                                    "label": "Start date of TB treatment:",
                                    "id": "startDateOfTbTreatment",
                                    "historicalExpression": "HD.getObject('prevEnc').getValue('a8afdb8c-1350-11df-a1f1-0026b9348838.a899e5f2-1350-11df-a1f1-0026b9348838')",
                                    "questionOptions": {
                                        "concept": "a899e5f2-1350-11df-a1f1-0026b9348838",
                                        "rendering": "date"
                                    },
                                    "type": "obs",
                                    "validators": [
                                        {
                                            "type": "date"
                                        },
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(onTbTreatment) && arrayContains(['a899b35c-1350-11df-a1f1-0026b9348838'], onTbTreatment) && isEmpty(myValue)",
                                            "message": "You indicated patient on tb treatment, indicate start date."
                                        },
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "(isEmpty(onTbTreatment) || !arrayContains(['a899b35c-1350-11df-a1f1-0026b9348838'], onTbTreatment)) && !isEmpty(myValue)",
                                            "message": "You indicated patient is not on tb treatment, therefore start date should not be indicated."
                                        }
                                    ],
                                    "hide": {
                                        "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                                    }
                                }
                            ]
                        },
                        {
                            "type": "obsGroup",
                            "label": "Current TB regimen",
                            "questionOptions": {
                                "concept": "a8afdb8c-1350-11df-a1f1-0026b9348838",
                                "rendering": "repeating"
                            },
                            "questions": [
                                {
                                    "label": "Current TB regimen",
                                    "type": "obs",
                                    "id": "tb_current",
                                    "questionOptions": {
                                        "concept": "a899e444-1350-11df-a1f1-0026b9348838",
                                        "answers": [
                                            {
                                                "concept": "a899f51a-1350-11df-a1f1-0026b9348838",
                                                "label": "RHZE"
                                            },
                                            {
                                                "concept": "a897d1a4-1350-11df-a1f1-0026b9348838",
                                                "label": "RHZ"
                                            },
                                            {
                                                "concept": "a8a382ba-1350-11df-a1f1-0026b9348838",
                                                "label": "RHE"
                                            },
                                            {
                                                "concept": "a89b1ca6-1350-11df-a1f1-0026b9348838",
                                                "label": "RH"
                                            },
                                            {
                                                "concept": "a899e19c-1350-11df-a1f1-0026b9348838",
                                                "label": "EH"
                                            },
                                            {
                                                "concept": "a8971c64-1350-11df-a1f1-0026b9348838",
                                                "label": "Ethambutol"
                                            },
                                            {
                                                "concept": "a8a3243c-1350-11df-a1f1-0026b9348838",
                                                "label": "MDR drugs"
                                            },
                                            {
                                                "concept": "a896cc00-1350-11df-a1f1-0026b9348838",
                                                "label": "INH"
                                            },
                                            {
                                                "concept": "a8ac5f2a-1350-11df-a1f1-0026b9348838",
                                                "label": "Pyrazinamide"
                                            },
                                            {
                                                "concept": "a8952e4a-1350-11df-a1f1-0026b9348838",
                                                "label": "Streptomycin"
                                            },
                                            {
                                                "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                                                "label": "Other"
                                            },
                                            {
                                                "concept": "b8aa06ca-93c6-40ea-b144-c74f841926f4",
                                                "label": "Rifabutin"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "validators": [],
                                    "hide": {
                                        "hideWhenExpression": "onTbTreatment !== 'a899b35c-1350-11df-a1f1-0026b9348838'"
                                    }
                                },
                                {
                                    "label": "tabs/day",
                                    "questionOptions": {
                                        "concept": "a8a07386-1350-11df-a1f1-0026b9348838",
                                        "max": "30",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "tb_current",
                                        "value": [
                                            "a899f51a-1350-11df-a1f1-0026b9348838",
                                            "a897d1a4-1350-11df-a1f1-0026b9348838",
                                            "a8a382ba-1350-11df-a1f1-0026b9348838"
                                        ]
                                    }
                                },
                                {
                                    "label": "mg",
                                    "questionOptions": {
                                        "concept": "a8a063c8-1350-11df-a1f1-0026b9348838",
                                        "max": "1000",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "tb_current",
                                        "value": [
                                            "a899e19c-1350-11df-a1f1-0026b9348838",
                                            "a8ac5f2a-1350-11df-a1f1-0026b9348838",
                                            "a8952e4a-1350-11df-a1f1-0026b9348838"
                                        ]
                                    }
                                },
                                {
                                    "label": "mg/day",
                                    "questionOptions": {
                                        "concept": "a8a0744e-1350-11df-a1f1-0026b9348838",
                                        "max": "2000",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "tb_current",
                                        "value": [
                                            "a896cc00-1350-11df-a1f1-0026b9348838",
                                            "a8971c64-1350-11df-a1f1-0026b9348838"
                                        ]
                                    }
                                },
                                {
                                    "label": "tabs",
                                    "questionOptions": {
                                        "concept": "a8a0630a-1350-11df-a1f1-0026b9348838",
                                        "max": "180",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "tb_current",
                                        "value": [
                                            "b8aa06ca-93c6-40ea-b144-c74f841926f4"
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "label": "Cryptococcal Secondary Prevention",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "Cryptococcus Tx:",
                            "id": "cryptCurrent",
                            "questionOptions": {
                                "concept": "a899e516-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a8971e12-1350-11df-a1f1-0026b9348838",
                                        "label": "Fluconazole 400mg"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs",
                            "validators": []
                        }
                    ]
                },
                {
                    "label": "Other Medications",
                    "questions": [
                        {
                            "label": "Please add any other medications the patient is taking",
                            "type": "obsGroup",
                            "questionOptions": {
                                "concept": "a8a072c8-1350-11df-a1f1-0026b9348838",
                                "rendering": "repeating"
                            },
                            "questions": [
                                {
                                    "label": "Other drugs:",
                                    "questionOptions": {
                                        "concept": "a8a060c6-1350-11df-a1f1-0026b9348838",
                                        "rendering": "drug"
                                    },
                                    "type": "obs",
                                    "validators": []
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "label": "Medication Plan",
            "sections": [
                {
                    "label": "ART Plan",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "required": "true",
                            "id": "arvPlan",
                            "label": "ART plan:",
                            "questionOptions": {
                                "concept": "a89b75d4-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a89b7908-1350-11df-a1f1-0026b9348838",
                                        "label": "Continue regimen"
                                    },
                                    {
                                        "concept": "a898c938-1350-11df-a1f1-0026b9348838",
                                        "label": "Change dose"
                                    },
                                    {
                                        "concept": "a89b7c50-1350-11df-a1f1-0026b9348838",
                                        "label": "Change regimen"
                                    },
                                    {
                                        "concept": "a89b7ae8-1350-11df-a1f1-0026b9348838",
                                        "label": "Change formulation"
                                    },
                                    {
                                        "concept": "a8a00158-1350-11df-a1f1-0026b9348838",
                                        "label": "Drug substitution"
                                    },
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "Not on ARVS"
                                    },
                                    {
                                        "concept": "a8a00220-1350-11df-a1f1-0026b9348838",
                                        "label": "Restart"
                                    },
                                    {
                                        "concept": "a89b77aa-1350-11df-a1f1-0026b9348838",
                                        "label": "Start ARVs"
                                    },
                                    {
                                        "concept": "a89b7d36-1350-11df-a1f1-0026b9348838",
                                        "label": "Stop all"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs",
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(onArt) && onArt === 'a899b35c-1350-11df-a1f1-0026b9348838' && !isEmpty(myValue) && arrayContains(['a89b77aa-1350-11df-a1f1-0026b9348838','a899e0ac-1350-11df-a1f1-0026b9348838','a8a00220-1350-11df-a1f1-0026b9348838'], myValue)",
                                    "message": "Patient marked as on ART in ART History section. Therefore plan can only be drug substitution, continue regimen, change dose, chage regimen, change"
                                },
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(onArt) && onArt === 'a899b42e-1350-11df-a1f1-0026b9348838' && !isEmpty(myValue) && !arrayContains(['a89b77aa-1350-11df-a1f1-0026b9348838','a899e0ac-1350-11df-a1f1-0026b9348838','a8a00220-1350-11df-a1f1-0026b9348838'], myValue)",
                                    "message": "Patient marked as not on ART in ART History section. Therefore plan can only be None,Start"
                                }
                            ]
                        },
                        {
                            "type": "obsGroup",
                            "label": "ART change reason",
                            "questionOptions": {
                                "concept": "a8a07688-1350-11df-a1f1-0026b9348838",
                                "rendering": "group"
                            },
                            "questions": [
                                {
                                    "id": "arvChangeReason",
                                    "label": "Reason for stopping/change/substitution/interruption:",
                                    "questionOptions": {
                                        "concept": "a89b7110-1350-11df-a1f1-0026b9348838",
                                        "answers": [
                                            {
                                                "concept": "a89ce50e-1350-11df-a1f1-0026b9348838",
                                                "label": "Adherence concerns"
                                            },
                                            {
                                                "concept": "a8981934-1350-11df-a1f1-0026b9348838",
                                                "label": "Clinical treatment failure"
                                            },
                                            {
                                                "concept": "c0c9eab3-46f6-453c-b29d-dc1c242317c5",
                                                "label": "Drug out of stock"
                                            },
                                            {
                                                "concept": "a890a96a-1350-11df-a1f1-0026b9348838",
                                                "label": "Due to new TB"
                                            },
                                            {
                                                "concept": "057dae68-3d6f-4d79-926c-ed75a0ce7fd5",
                                                "label": "Illness/hospitalization"
                                            },
                                            {
                                                "concept": "c6537e06-9fc2-47da-b679-e2a32824407f",
                                                "label": "Immunologic failure"
                                            },
                                            {
                                                "concept": "a8a6f56c-1350-11df-a1f1-0026b9348838",
                                                "label": "Lost to follow-up"
                                            },
                                            {
                                                "concept": "a8a07b10-1350-11df-a1f1-0026b9348838",
                                                "label": "New drug available"
                                            },
                                            {
                                                "concept": "a8b03af0-1350-11df-a1f1-0026b9348838",
                                                "label": "Patient lacks finances"
                                            },
                                            {
                                                "concept": "abe0cbb6-8d08-487a-b18e-7af873945fcc",
                                                "label": "Planned Rx interruption"
                                            },
                                            {
                                                "concept": "a8909e8e-1350-11df-a1f1-0026b9348838",
                                                "label": "Pregnancy"
                                            },
                                            {
                                                "concept": "e38b3e51-8a27-4bf6-b0c8-e0b285e4bb2f",
                                                "label": "Risk of pregnancy"
                                            },
                                            {
                                                "concept": "a89d25fa-1350-11df-a1f1-0026b9348838",
                                                "label": "Other patient dcisions"
                                            },
                                            {
                                                "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                                                "label": "Other"
                                            },
                                            {
                                                "concept": "a890d1ba-1350-11df-a1f1-0026b9348838",
                                                "label": "Toxicity"
                                            },
                                            {
                                                "concept": "93fe19e8-fec4-4e4b-85f1-239e1fabd761",
                                                "label": "Virologic failure"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "type": "obs",
                                    "validators": [
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(arvPlan) && isEmpty(myValue) && arrayContains(['a898c938-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838','a89b7ae8-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7d36-1350-11df-a1f1-0026b9348838'], arvPlan)",
                                            "message": "You indicated patient is changing/changing dose/substituting/stopping arvs, reason for changing should be selected."
                                        }
                                    ],
                                    "hide": {
                                        "hideWhenExpression": "!arrayContains(['a898c938-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838','a89b7ae8-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7d36-1350-11df-a1f1-0026b9348838'], arvPlan)"
                                    }
                                },
                                {
                                    "id": "arvToxicityCause",
                                    "label": "If toxicity, please provide cause:",
                                    "questionOptions": {
                                        "concept": "a8a032fe-1350-11df-a1f1-0026b9348838",
                                        "answers": [
                                            {
                                                "concept": "a877c7f6-1350-11df-a1f1-0026b9348838",
                                                "label": "Anaemia"
                                            },
                                            {
                                                "concept": "a8909060-1350-11df-a1f1-0026b9348838",
                                                "label": "Hepatitis"
                                            },
                                            {
                                                "concept": "a89d0c0a-1350-11df-a1f1-0026b9348838",
                                                "label": "IRIS"
                                            },
                                            {
                                                "concept": "a8a01dfa-1350-11df-a1f1-0026b9348838",
                                                "label": "Lactic Acidosis"
                                            },
                                            {
                                                "concept": "a89cee50-1350-11df-a1f1-0026b9348838",
                                                "label": "Lipo-dystrophy"
                                            },
                                            {
                                                "concept": "a897fe86-1350-11df-a1f1-0026b9348838",
                                                "label": "Neuropathy"
                                            },
                                            {
                                                "concept": "a8ad239c-1350-11df-a1f1-0026b9348838",
                                                "label": "Persistent Vomiting"
                                            },
                                            {
                                                "concept": "a895776a-1350-11df-a1f1-0026b9348838",
                                                "label": "Rash"
                                            },
                                            {
                                                "concept": "a8a16d0e-1350-11df-a1f1-0026b9348838",
                                                "label": "Steven-Johnson syndrome"
                                            },
                                            {
                                                "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                                                "label": "Other"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "type": "obs",
                                    "validators": [
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(arvChangeReason)&&isEmpty(myValue) && (arvChangeReason==='a890d1ba-1350-11df-a1f1-0026b9348838')",
                                            "message": "You indicated patient is changing /changing dose/substituting/stopping arvs due to toxicity, cause should be selected."
                                        },
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(arvChangeReason) && !isEmpty(myValue) && (arvChangeReason!=='a890d1ba-1350-11df-a1f1-0026b9348838')",
                                            "message": "You indicated patient is not changing/dose/substituting/stopping arvs due to toxicity, cause should be selected."
                                        }
                                    ],
                                    "hide": {
                                        "hideWhenExpression": "arvChangeReason!=='a890d1ba-1350-11df-a1f1-0026b9348838'"
                                    }
                                },
                                {
                                    "label": "If toxicity: Other (specify):",
                                    "id": "q24cToxOther",
                                    "type": "obs",
                                    "questionOptions": {
                                        "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                                        "rendering": "text"
                                    },
                                    "validators": [
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(arvToxicityCause) && isEmpty(myValue) && (arvToxicityCause==='a8aaf3e2-1350-11df-a1f1-0026b9348838')",
                                            "message": "You indicated patient is changing /changing dose/substituting/stopping arvs due to other toxicity, indicate the other cause."
                                        },
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(arvToxicityCause) && !isEmpty(myValue) && (arvToxicityCause!=='a8aaf3e2-1350-11df-a1f1-0026b9348838')",
                                            "message": "You indicated patient is not changing /changing dose/substituting/stopping arvs due to other toxicity, other cause is not required."
                                        }
                                    ],
                                    "hide": {
                                        "hideWhenExpression": "arvToxicityCause!=='a8aaf3e2-1350-11df-a1f1-0026b9348838'"
                                    }
                                }
                            ]
                        },
                        {
                            "label": "ART regimen started, peds:",
                            "id": "artStartedPed",
                            "questionOptions": {
                                "concept": "a89b6a62-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                   {
                                        "concept": "b58a28d2-36de-11e0-93be-0026b9348838",
                                        "label": "ABC 60mg/3TC 30mg"
                                    },
                                    {
                                        "concept": "25c753d8-870f-11e0-85d3-000d6014b64c",
                                        "label": "ZDV 60mg/3TC 30mg"
                                    },
                                    {
                                        "concept": "20185c04-9334-11df-8193-000d6014b64c",
                                        "label": "ZDV 60mg/3TC 30mg/NVP 50mg"
                                    },
                                    {
                                        "concept": "8ddf2f66-9333-11df-8193-000d6014b64c",
                                        "label": "ZDV 300mg/3TC 150mg/NVP 200mg >25kgs"
                                    },
                                    {
                                        "concept": "fd4cd670-3115-11e0-8090-0026b9348838",
                                        "label": "3TC 150mg/ZDV 300mg >25kgs"
                                    },
                                    {
                                        "concept": "b9da84e8-3127-11e0-8090-0026b9348838",
                                        "label": "3TC 300mg/TDF 300mg >25kgs"
                                    },
                                    {
                                        "concept": "e0037172-87ce-11e0-85d3-000d6014b64c",
                                        "label": "TDF 300mg/3TC 300mg/EFV 600mg >35kgs"
                                    },
                                    {
                                        "concept": "f8b6299e-6bbf-446a-b3f1-a88f5d6b9da2",
                                        "label": "Lopinavir 80mg/Ritonavir 20mg"
                                    },
                                    {
                                        "concept": "fa8266f6-36df-11e0-93be-0026b9348838",
                                        "label": "Lopinavir 200mg/Ritonavir 50mg >25kgs"
                                    },
                                    {
                                        "concept": "3cbfb0b9-721e-4d42-92a3-7d37269aab24",
                                        "label": " Atazanavir 300mg/ritonavir 100mg"
                                    },
                                    {
                                        "concept": "2fc1f68c-9939-44d4-b5f4-e064ed4073ca",
                                        "label": "Nevirapine 100mg"
                                    },
                                    {
                                        "concept": "0485075a-3111-11e0-8090-0026b9348838",
                                        "label": "Nevirapine 200mg"
                                    },
                                    {
                                        "concept": "db3c194b-3e1b-4001-9a1c-a5df1728fc28",
                                        "label": "Efavirenz 200mg"
                                    },
                                    {
                                        "concept": "ff9096b6-d86c-403a-9bda-eab02252dbf3",
                                        "label": "Efavirenz 250mg"
                                    },
                                    {
                                        "concept": "55e0461f-b28f-42de-a3c6-328d7f17c44b",
                                        "label": "Efavirenz 350mg"
                                    },
                                    {
                                        "concept": "81a41a82-fd72-4da4-8d47-edd5672549ce",
                                        "label": "Efavirenz 400mg"
                                    },
                                    {
                                        "concept": "4677ad3e-3120-11e0-8090-0026b9348838",
                                        "label": "Efavirenz 600mg"
                                    },
                                    {
                                        "concept": "d6262526-3113-11e0-8090-0026b9348838",
                                        "label": "Lamivudine 150mg"
                                    },
                                    {
                                        "concept": "52441ef8-3126-11e0-8090-0026b9348838",
                                        "label": " Abacavir 300mg"
                                    },
                                    {
                                        "concept": "21d417bc-3114-11e0-8090-0026b9348838",
                                        "label": " Zidovudine 300mg "
                                    },
                                    {
                                        "concept": "1baf254e-1429-4fd9-8db1-edf6523cea13",
                                        "label": " Ritonavir 100mg"
                                    },
                                    {
                                        "concept": "42ef7c4d-d6fb-49c0-a46e-019c42dea203",
                                        "label": " Ritonavir 80mg"
                                    },
                                    {
                                        "concept": "da698164-870d-11e0-85d3-000d6014b64c",
                                        "label": " Raltegravir 400mg"
                                    },
                                    {
                                        "concept": "a8afbf9e-1350-11df-a1f1-0026b9348838",
                                        "label": "Atazanavir "
                                    }
                                ],
                                "rendering": "multiCheckbox"
                            },
                            "type": "obs",
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(arvPlan) && isEmpty(myValue) && arrayContains(['a89b7ae8-1350-11df-a1f1-0026b9348838', 'a898c938-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838', 'a8a00220-1350-11df-a1f1-0026b9348838'], arvPlan)",
                                    "message": "Based on the plan selected, you must choose a regimen."
                                },
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(myValue) && !arrayContains(['a89b7ae8-1350-11df-a1f1-0026b9348838', 'a898c938-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838', 'a8a00220-1350-11df-a1f1-0026b9348838'], arvPlan)",
                                    "message": "Based on the plan selected, you may not choose a regimen."
                                }
                            ],
                            "hide": {
                                "hideWhenExpression": "pattype !== 'a89ee9a8-1350-11df-a1f1-0026b9348838'||!arrayContains(['a89b7ae8-1350-11df-a1f1-0026b9348838', 'a898c938-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838', 'a8a00220-1350-11df-a1f1-0026b9348838'],arvPlan)"
                            }
                        },
                        {
                            "label": "ART regimen started, adult:",
                            "id": "artStartedAdult",
                            "questionOptions": {
                                "concept": "a89b6a62-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                     {
                                        "concept": "6a73f32d-1870-4527-af6e-74443251ded2",
                                        "label": "NVP200/ZDV300/3TC150"
                                    },
                                    {
                                        "concept": "1c4a75d0-cc91-4752-b0a5-4b833326ff7a",
                                        "label": "TDF300mg/3TC300mg/EFV600mg"
                                    },
                                    {
                                        "concept": "a89cc876-1350-11df-a1f1-0026b9348838",
                                        "label": "3TC300mg/TDF300mg"
                                    },
                                    {
                                        "concept": "3d587177-984e-4eeb-93f2-3223b6c1dd7c",
                                        "label": "3TC150mg/D4T30mg"
                                    },
                                    {
                                        "concept": "a896758e-1350-11df-a1f1-0026b9348838",
                                        "label": "3TC150mg/ZDV300mg"
                                    },
                                    {
                                        "concept": "a897e608-1350-11df-a1f1-0026b9348838",
                                        "label": "NVP200/D4T30/3TC150"
                                    },
                                    {
                                        "concept": "a8afcf84-1350-11df-a1f1-0026b9348838",
                                        "label": "Emtri200mg/TDF300(Truvada)"
                                    },
                                    {
                                        "concept": "a897e7c0-1350-11df-a1f1-0026b9348838",
                                        "label": "Aluvia(Kaletra)200mg/LPV50mg"
                                    },
                                    {
                                        "concept": "a8afc066-1350-11df-a1f1-0026b9348838",
                                        "label": "Atazanavir300/Ritonavir100"
                                    },
                                    {
                                        "concept": "dabf36cb-dd9a-4542-a8ef-874c1ee5be4a",
                                        "label": "FTC200mg/RPV25mg/TDF245mg(Eviplera)"
                                    },
                                    {
                                        "concept": "a897f8a0-1350-11df-a1f1-0026b9348838",
                                        "label": "Abacavir300mg"
                                    },
                                    {
                                        "concept": "a89677e6-1350-11df-a1f1-0026b9348838",
                                        "label": "Efavirenz600mg"
                                    },
                                    {
                                        "concept": "a89673f4-1350-11df-a1f1-0026b9348838",
                                        "label": "Lamivudine150mg"
                                    },
                                    {
                                        "concept": "a8967656-1350-11df-a1f1-0026b9348838",
                                        "label": "Nevirapine200mg"
                                    },
                                    {
                                        "concept": "a8afbd64-1350-11df-a1f1-0026b9348838",
                                        "label": "Raltegravir 400mg"
                                    },
                                    {
                                        "concept": "a897ea4a-1350-11df-a1f1-0026b9348838",
                                        "label": "Zidovudine300mg"
                                    },
                                    {
                                        "concept": "68a0a5dd-1e91-43a2-8dce-c6e84a14de04",
                                        "label": "Darunavir 600mg"
                                    },
                                    {
                                        "concept": "38fbba9c-4b26-412d-9659-8dd649514d66",
                                        "label": "Etravirine 100mg"
                                    },
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a8a87a86-1350-11df-a1f1-0026b9348838",
                                        "label": "Other"
                                    }
                                ],
                                "rendering": "multiCheckbox"
                            },
                            "type": "obs",
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(arvPlan) && isEmpty(myValue) && arrayContains(['a89b7ae8-1350-11df-a1f1-0026b9348838', 'a898c938-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838', 'a8a00220-1350-11df-a1f1-0026b9348838'], arvPlan)",
                                    "message": "Based on the plan selected, you must choose a regimen."
                                },
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(myValue) && !arrayContains(['a89b7ae8-1350-11df-a1f1-0026b9348838', 'a898c938-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838', 'a8a00220-1350-11df-a1f1-0026b9348838'], arvPlan)",
                                    "message": "Based on the plan selected, you may not choose a regimen."
                                }
                            ],
                            "hide": {
                                "hideWhenExpression": "pattype !== 'a89ee8ea-1350-11df-a1f1-0026b9348838'||!arrayContains(['a89b7ae8-1350-11df-a1f1-0026b9348838', 'a898c938-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838','a8a00158-1350-11df-a1f1-0026b9348838','a89b7c50-1350-11df-a1f1-0026b9348838', 'a8a00220-1350-11df-a1f1-0026b9348838'],arvPlan)"
                            }
                        }
                    ]
                },
                {
                    "label": "PCP Prophylaxis Plan",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "required": "true",
                            "id": "pcpProphylaxisPlan",
                            "label": "PCP prophylaxis plan:",
                            "questionOptions": {
                                "concept": "a89b7e12-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a89b7908-1350-11df-a1f1-0026b9348838",
                                        "label": "Continue"
                                    },
                                    {
                                        "concept": "a89b7c50-1350-11df-a1f1-0026b9348838",
                                        "label": "Change Regimen"
                                    },
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a89b77aa-1350-11df-a1f1-0026b9348838",
                                        "label": "Start"
                                    },
                                    {
                                        "concept": "a89b7d36-1350-11df-a1f1-0026b9348838",
                                        "label": "Stop"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs",
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(pcpProphylaxisCurrent) && !isEmpty(myValue) && !arrayContains(['a899e0ac-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838'],myValue)&&(pcpProphylaxisCurrent==='a899e0ac-1350-11df-a1f1-0026b9348838')",
                                    "message": "Patient marked as not on PCP prophylaxis. Therefore plan can only be none or start."
                                },
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(pcpProphylaxisCurrent) && !isEmpty(myValue) && arrayContains(['a8989396-1350-11df-a1f1-0026b9348838','a890c9e0-1350-11df-a1f1-0026b9348838'],pcpProphylaxisCurrent)&&!(arrayContains(['a89b7c50-1350-11df-a1f1-0026b9348838','a89b7d36-1350-11df-a1f1-0026b9348838','a89b7908-1350-11df-a1f1-0026b9348838'], myValue))",
                                    "message": "Patient marked as on PCP Prophylaxis. Therefore plan can only be change regimen,continue or stop."
                                }
                            ]
                        },
                        {
                            "label": "If Start/Change, regimen:",
                            "id": "pcpPlanMedication",
                            "questionOptions": {
                                "concept": "a89b82cc-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a890c9e0-1350-11df-a1f1-0026b9348838",
                                        "label": "Dapsone"
                                    },
                                    {
                                        "concept": "a8989396-1350-11df-a1f1-0026b9348838",
                                        "label": "Septrin"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs",
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(pcpProphylaxisPlan) && isEmpty(myValue) && arrayContains(['a89b77aa-1350-11df-a1f1-0026b9348838', 'a89b7c50-1350-11df-a1f1-0026b9348838'], pcpProphylaxisPlan)",
                                    "message": "You indicated patient is starting/continuing/changing PCP regimen. Please select regimen."
                                }
                            ],
                            "hide": {
                                "hideWhenExpression": "!arrayContains(['a89b77aa-1350-11df-a1f1-0026b9348838', 'a89b7c50-1350-11df-a1f1-0026b9348838'], pcpProphylaxisPlan)"
                            }
                        }
                    ]
                },
                {
                    "label": "TB Prophylaxis Plan",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "TB prophylaxis plan:",
                            "required": "true",
                            "id": "tbpropplan",
                            "questionOptions": {
                                "concept": "a89c1cfa-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a89b7908-1350-11df-a1f1-0026b9348838",
                                        "label": "Continue"
                                    },
                                    {
                                        "concept": "a89b77aa-1350-11df-a1f1-0026b9348838",
                                        "label": "Start"
                                    },
                                    {
                                        "concept": "a89b7d36-1350-11df-a1f1-0026b9348838",
                                        "label": "Stop"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "type": "obs",
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(onTbProphylaxis) && !isEmpty(myValue) && !arrayContains(['a899e0ac-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838'],myValue)&&(onTbProphylaxis==='a899e0ac-1350-11df-a1f1-0026b9348838')",
                                    "message": "Patient marked as not on TB prophylaxis. Therefore plan can only be none or start."
                                },
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(onTbProphylaxis) && !isEmpty(myValue) && arrayContains(['a8989396-1350-11df-a1f1-0026b9348838','a890c9e0-1350-11df-a1f1-0026b9348838'],onTbProphylaxis)&&!(arrayContains(['a89b7c50-1350-11df-a1f1-0026b9348838','a89b7d36-1350-11df-a1f1-0026b9348838','a89b7908-1350-11df-a1f1-0026b9348838'], myValue))",
                                    "message": "Patient marked as on TB Prophylaxis. Therefore plan can only be change regimen,continue or stop."
                                }
                            ]
                        }
                    ]
                },
                {
                    "label": "TB Treatment Plan",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "TB Treatment Started, detailed",
                            "type": "obsGroup",
                            "questionOptions": {
                                "concept": "a89fe6f0-1350-11df-a1f1-0026b9348838",
                                "rendering": "group"
                            },
                            "questions": [
                                {
                                    "label": "TB Treatment plan:",
                                    "id": "tbTreatmentPlan",
                                    "required": "true",
                                    "questionOptions": {
                                        "concept": "a89c1fd4-1350-11df-a1f1-0026b9348838",
                                        "answers": [
                                            {
                                                "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                                "label": "None"
                                            },
                                            {
                                                "concept": "a89b7908-1350-11df-a1f1-0026b9348838",
                                                "label": "Continue regimen"
                                            },
                                            {
                                                "concept": "a89b77aa-1350-11df-a1f1-0026b9348838",
                                                "label": "Start induction"
                                            },
                                            {
                                                "concept": "a89b7c50-1350-11df-a1f1-0026b9348838",
                                                "label": "Change to continuation"
                                            },
                                            {
                                                "concept": "a898c938-1350-11df-a1f1-0026b9348838",
                                                "label": "Re-dose"
                                            },
                                            {
                                                "concept": "a8a00158-1350-11df-a1f1-0026b9348838",
                                                "label": "Substitution"
                                            },
                                            {
                                                "concept": "a8a00220-1350-11df-a1f1-0026b9348838",
                                                "label": "Restart"
                                            },
                                            {
                                                "concept": "a89b7d36-1350-11df-a1f1-0026b9348838",
                                                "label": "Stop"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "type": "obs",
                                    "validators": [
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(onTbTreatment) && onTbTreatment === 'a899b35c-1350-11df-a1f1-0026b9348838' && !isEmpty(myValue) && arrayContains(['a89b77aa-1350-11df-a1f1-0026b9348838','a899e0ac-1350-11df-a1f1-0026b9348838','a8a00220-1350-11df-a1f1-0026b9348838'], myValue)",
                                            "message": "Patient marked as on TB in TB History section. Therefore plan can only be drug substitution, continue regimen, change dose, change regimen"
                                        },
                                        {
                                            "type": "js_expression",
                                            "failsWhenExpression": "!isEmpty(onTbTreatment) && onTbTreatment === 'a899b42e-1350-11df-a1f1-0026b9348838' && !isEmpty(myValue) && !arrayContains(['a89b77aa-1350-11df-a1f1-0026b9348838','a899e0ac-1350-11df-a1f1-0026b9348838','a8a00220-1350-11df-a1f1-0026b9348838'], myValue)",
                                            "message": "Patient marked as not on TB in TB History section. Therefore plan can only be None,Start"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "obsGroup",
                            "label": "tbMedPickupSite",
                            "questionOptions": {
                                "concept": "b55a6d42-3189-4d4c-97bf-772dfe17b887",
                                "rendering": "group"
                            },
                            "questions": [
                                {
                                    "label": "Site of TB meds pick-up:",
                                    "id": "tbMedPickupSite",
                                    "questionOptions": {
                                        "concept": "16db21cd-10cb-4c31-bb5a-b7619bfbea66",
                                        "answers": [
                                            {
                                                "concept": "a89c2f42-1350-11df-a1f1-0026b9348838",
                                                "label": "This ampath site"
                                            },
                                            {
                                                "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                                                "label": "Other"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "type": "obs",
                                    "validators": [],
                                    "hide": {
                                        "hideWhenExpression": "arrayContains(['a899e0ac-1350-11df-a1f1-0026b9348838', 'a89b7d36-1350-11df-a1f1-0026b9348838'], tbTreatmentPlan)"
                                    }
                                },
                                {
                                    "label": "Other Specify:",
                                    "id": "medspickOther",
                                    "questionOptions": {
                                        "concept": "a8a06fc6-1350-11df-a1f1-0026b9348838",
                                        "rendering": "text"
                                    },
                                    "type": "obs",
                                    "validators": [],
                                    "hide": {
                                        "hideWhenExpression": "tbMedPickupSite !== 'a8aaf3e2-1350-11df-a1f1-0026b9348838'"
                                    }
                                }
                            ]
                        },
                        {
                            "label": "TB Treatment Started, detailed",
                            "type": "obsGroup",
                            "questionOptions": {
                                "concept": "a89fe6f0-1350-11df-a1f1-0026b9348838",
                                "rendering": "repeating"
                            },
                            "questions": [
                                {
                                    "label": "TB regimen started",
                                    "questionOptions": {
                                        "concept": "a89c218c-1350-11df-a1f1-0026b9348838",
                                        "answers": [
                                            {
                                                "concept": "a899f51a-1350-11df-a1f1-0026b9348838",
                                                "label": "RHZE"
                                            },
                                            {
                                                "concept": "a897d1a4-1350-11df-a1f1-0026b9348838",
                                                "label": "RHZ"
                                            },
                                            {
                                                "concept": "a8a382ba-1350-11df-a1f1-0026b9348838",
                                                "label": "RHE"
                                            },
                                            {
                                                "concept": "a89b1ca6-1350-11df-a1f1-0026b9348838",
                                                "label": "RH"
                                            },
                                            {
                                                "concept": "a899e19c-1350-11df-a1f1-0026b9348838",
                                                "label": "EH"
                                            },
                                            {
                                                "concept": "a8971c64-1350-11df-a1f1-0026b9348838",
                                                "label": "Ethambutol"
                                            },
                                            {
                                                "concept": "a8a3243c-1350-11df-a1f1-0026b9348838",
                                                "label": "MDR drugs"
                                            },
                                            {
                                                "concept": "a896cc00-1350-11df-a1f1-0026b9348838",
                                                "label": "INH"
                                            },
                                            {
                                                "concept": "a8ac5f2a-1350-11df-a1f1-0026b9348838",
                                                "label": "Pyrazinamide"
                                            },
                                            {
                                                "concept": "a8952e4a-1350-11df-a1f1-0026b9348838",
                                                "label": "Streptomycin"
                                            },
                                            {
                                                "concept": "a8aaf3e2-1350-11df-a1f1-0026b9348838",
                                                "label": "Other"
                                            },
                                            {
                                                "concept": "b8aa06ca-93c6-40ea-b144-c74f841926f4",
                                                "label": "Rifabutin"
                                            }
                                        ],
                                        "rendering": "select"
                                    },
                                    "id": "q26f",
                                    "type": "obs",
                                    "validators": [],
                                    "hide": {
                                        "hideWhenExpression": "arrayContains(['a89b7908-1350-11df-a1f1-0026b9348838','a899e0ac-1350-11df-a1f1-0026b9348838', 'a89b7d36-1350-11df-a1f1-0026b9348838'], tbTreatmentPlan)"
                                    }
                                },
                                {
                                    "label": "tabs/day",
                                    "questionOptions": {
                                        "concept": "a8a07386-1350-11df-a1f1-0026b9348838",
                                        "max": "30",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "q26f",
                                        "value": [
                                            "a899f51a-1350-11df-a1f1-0026b9348838",
                                            "a897d1a4-1350-11df-a1f1-0026b9348838",
                                            "a8a382ba-1350-11df-a1f1-0026b9348838"
                                        ]
                                    }
                                },
                                {
                                    "label": "mg",
                                    "questionOptions": {
                                        "concept": "a8a063c8-1350-11df-a1f1-0026b9348838",
                                        "max": "1000",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "q26f",
                                        "value": [
                                            "a899e19c-1350-11df-a1f1-0026b9348838",
                                            "a8ac5f2a-1350-11df-a1f1-0026b9348838",
                                            "a8952e4a-1350-11df-a1f1-0026b9348838"
                                        ]
                                    }
                                },
                                {
                                    "label": "mg/day",
                                    "questionOptions": {
                                        "concept": "a8a0744e-1350-11df-a1f1-0026b9348838",
                                        "max": "2000",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "q26f",
                                        "value": [
                                            "a896cc00-1350-11df-a1f1-0026b9348838",
                                            "a8971c64-1350-11df-a1f1-0026b9348838"
                                        ]
                                    }
                                },
                                {
                                    "label": "tabs",
                                    "questionOptions": {
                                        "concept": "a8a0630a-1350-11df-a1f1-0026b9348838",
                                        "max": "180",
                                        "min": "0",
                                        "rendering": "number"
                                    },
                                    "type": "obs",
                                    "hide": {
                                        "field": "q26f",
                                        "value": [
                                            "b8aa06ca-93c6-40ea-b144-c74f841926f4"
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "label": "Cryptococcal Treatment Plan",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "Cryptococcal treatment plan",
                            "type": "obs",
                            "questionOptions": {
                                "concept": "a89c2790-1350-11df-a1f1-0026b9348838",
                                "answers": [
                                    {
                                        "concept": "a89b7908-1350-11df-a1f1-0026b9348838",
                                        "label": "Continue"
                                    },
                                    {
                                        "concept": "a89b7c50-1350-11df-a1f1-0026b9348838",
                                        "label": "Change regimen"
                                    },
                                    {
                                        "concept": "a899e0ac-1350-11df-a1f1-0026b9348838",
                                        "label": "None"
                                    },
                                    {
                                        "concept": "a89b77aa-1350-11df-a1f1-0026b9348838",
                                        "label": "Start"
                                    },
                                    {
                                        "concept": "a89b7d36-1350-11df-a1f1-0026b9348838",
                                        "label": "Stop"
                                    }
                                ],
                                "rendering": "select"
                            },
                            "validators": [
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "!isEmpty(cryptCurrent) && !isEmpty(myValue) && !arrayContains(['a899e0ac-1350-11df-a1f1-0026b9348838','a89b77aa-1350-11df-a1f1-0026b9348838'],myValue)&&(cryptCurrent==='a899e0ac-1350-11df-a1f1-0026b9348838')",
                                    "message": "Patient marked as not on Cryptococcus Treatment. Therefore plan can only be none or start."
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "label": "Additional Medication",
            "sections": [
                {
                    "reference": {
                        "form": "omed",
                        "page": "Other medication",
                        "section": "Additional Medication Orders"
                    }
                }
            ]
        },
        {
            "label": "Lab Orders",
            "sections": [
                {
                    "reference": {
                        "form": "lo",
                        "page": "Test orders",
                        "section": "Test Orders"
                    }
                }
            ]
        },
        {
            "label": "Next Appointment",
            "sections": [
                {
                    "label": "Next appointment",
                    "isExpanded": "true",
                    "questions": [
                        {
                            "label": "Return to clinic Date:",
                            "type": "obs",
                            "required": "true",
                            "questionOptions": {
                                "concept": "a8a666ba-1350-11df-a1f1-0026b9348838",
                                "rendering": "date",
                                "weeksList": [
                                    2,
                                    4,
                                    8,
                                    12,
                                    16
                                ]
                            },
                            "validators": [
                                {
                                    "type": "date",
                                    "allowFutureDates": "true"
                                },
                                {
                                    "type": "js_expression",
                                    "failsWhenExpression": "(new moment(encDate)).isAfter((new moment(myValue)), 'day') || (new moment(encDate)).isSame((new moment(myValue)), 'day')",
                                    "message": "Return to clinic date should be greater than the encounter date."
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}