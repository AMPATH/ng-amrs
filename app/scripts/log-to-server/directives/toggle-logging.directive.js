// Generated by CoffeeScript 1.6.3
(function() {
  'use strict';
  angular.module('app.logToServer').directive('logSwitcher', LogSwitcher);
  LogSwitcher.$inject = ['$window'];

  function LogSwitcher($window) {
    return {
      require: 'ngModel',
      restrict: 'AE',
      scope: {},
      template: "<div class=\"switch\" ng-class=\"{\'switch-left\': !model, \'switch-right\': model}\">\n  <div class=\"switch-button\">&nbsp;</div>\n</div>",
      link: function(scope, element, attrs, ngModel) {
        var updateModel;
        updateModel = function() {
          if ($window.localStorage.getItem('logToggle') === null) {
            $window.localStorage.logToggle = false;
          }
          var toggle = JSON.parse($window.localStorage.logToggle);
          ngModel.$setViewValue(toggle);
          return scope.model = ngModel.$viewValue;
        };

        element.bind('click', function() {
          scope.$apply(function() {
            $window.localStorage.logToggle = !scope.model;
            scope.model = !scope.model;
          });
        });

        return ngModel.$render = function() {
          return updateModel();
        };
      },
    };
  }
}).call(this);
